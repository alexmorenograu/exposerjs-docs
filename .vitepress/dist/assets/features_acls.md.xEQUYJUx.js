import{_ as s,c as a,o as t,U as i}from"./chunks/framework.Zo-JgKpV.js";const u=JSON.parse('{"title":"ACLs System","description":"","frontmatter":{},"headers":[],"relativePath":"features/acls.md","filePath":"features/acls.md"}'),e={name:"features/acls.md"},l=i(`<h1 id="acls-system" tabindex="-1">ACLs System <a class="header-anchor" href="#acls-system" aria-label="Permalink to &quot;ACLs System&quot;">​</a></h1><h2 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h2><p>In order to be able to restrict routes based on roles we have created this ACL system</p><h2 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-label="Permalink to &quot;Types&quot;">​</a></h2><p>Exposer has 4 ways to use ACLs to adapt to the needs of each project. Select mode in <a href="/features/default-config.html">config.js → aclType</a>. They are ordered from most to least fast.</p><table><thead><tr><th></th><th>fast</th><th>fast&amp;db</th><th>cache</th><th>db</th></tr></thead><tbody><tr><td>Get acls from code</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>Get acls from db when it starts</td><td>❌</td><td>✅</td><td>✅</td><td>❌</td></tr><tr><td>Implement routes to get the acls again</td><td>❌</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Get acls for each request</td><td>❌</td><td>❌</td><td>❌</td><td>✅</td></tr></tbody></table><h3 id="fast" tabindex="-1">Fast <a class="header-anchor" href="#fast" aria-label="Permalink to &quot;Fast&quot;">​</a></h3><p>This mode is perfect if what you are looking for is maximum speed, by adding acls in the code. What ExposerJS does is when it is deployed, it loads all the acls to be able to consult them in the fastest and most efficient way.</p><div class="info custom-block"><p class="custom-block-title">Set mode</p><p>This is default mode</p></div><h3 id="fast-db" tabindex="-1">Fast&amp;DB <a class="header-anchor" href="#fast-db" aria-label="Permalink to &quot;Fast&amp;DB&quot;">​</a></h3><p>This mode is perfect if what you are looking for is maximum speed but adding the versatility of being able to load the database acls at the backEnd.</p><div class="info custom-block"><p class="custom-block-title">Set mode</p><p>&quot;aclType&quot;: &quot;fast&amp;db&quot;</p></div><h3 id="cache" tabindex="-1">Cache <a class="header-anchor" href="#cache" aria-label="Permalink to &quot;Cache&quot;">​</a></h3><p>This does the same as the Fast&amp;DB mode but displays a route that allows it to regenerate the ACLS when called, re-obtaining the data from the database in case there have been updates. This allows you to add new acls to the database and make the request to refresh them.</p><div class="info custom-block"><p class="custom-block-title">Set mode</p><p>&quot;aclType&quot;: &quot;cache&quot;</p></div><h3 id="db" tabindex="-1">DB <a class="header-anchor" href="#db" aria-label="Permalink to &quot;DB&quot;">​</a></h3><p>This mode is perfect if you want to be able to make changes to the database and have them applied instantly. T his has a speed cost, requiring all acls to be obtained for each request to the backend.</p><div class="info custom-block"><p class="custom-block-title">Set mode</p><p>&quot;aclType&quot;: &quot;db&quot;</p></div><h2 id="adding-in-the-code" tabindex="-1">Adding in the code <a class="header-anchor" href="#adding-in-the-code" aria-label="Permalink to &quot;Adding in the code&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">Global &#39;allows&#39;:</p><p>Use &#39;*&#39; for all roles. <br> Use &#39;$&#39; for all (example signIn, signUp, ...).</p></div><p>Add in method:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exposer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;exposerjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">exposer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  model: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myModel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  accepts: {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  returns: {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  http: {},</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  allow: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myRole&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myMethod,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Use model file:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { acl } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;exposerjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myModel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;findMany&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myRoleOne&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;create&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myRoleOne&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myRoleTwo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]][(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;upsert&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)][</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myCustomMethod&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div>`,24),h=[l];function n(d,o,p,r,k,c){return t(),a("div",null,h)}const y=s(e,[["render",n]]);export{u as __pageData,y as default};
